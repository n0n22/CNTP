<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="adminMapper">

	<resultMap id="BannerResultSet" type="banner">
		<result property="bannerNo" column="BANNER_NO" />
		<result property="memNo" column="MEM_NO" />
		<result property="createDate" column="CREATE_DATE" />
		<result property="OriginName" column="ORIGIN_NAME" />
		<result property="changeName" column="CHANGE_NAME" />
		<result property="status" column="STATUS" />
		<result property="writer" column="NICKNAME" />
	</resultMap>


<!-- 
=============================== 
회원 관련 기능
===============================
-->	






<!-- 
=============================== 
신고 관련 기능
===============================
-->	



	
<!-- 
=============================== 
배너 관련 기능
===============================
-->	

	
	<!-- 배너 목록 개수 조회 -->
	<select id="selectBannerListCount" parameterType="string" resultType="_int">
		SELECT
		       COUNT(*)
		  FROM 
		       BANNER
		 WHERE
			   "STATUS" = #{status}
	</select>
	
	<!-- 배너 목록 조회 -->
	<select id="selectBannerList" parameterType="string" resultMap="BannerResultSet">
		SELECT 
			   BANNER_NO
               ,MEM_NO
               ,CREATE_DATE
               ,ORIGIN_NAME
               ,CHANGE_NAME
               ,STATUS
		  FROM
		       BANNER
		 WHERE
		       "STATUS" = #{status}
		 ORDER
		    BY
		       BANNER_NO DESC
	</select>
	
	<!-- 배너 등록 -->
	<insert id="insertBanner" parameterType="banner">
		INSERT
		  INTO
		       BANNER
		       (
		       BANNER_NO
			   ,MEM_NO
               ,CREATE_DATE
               ,ORIGIN_NAME
               ,CHANGE_NAME
               ,STATUS
		       )
		VALUES
		       (
		       SEQ_BNNO.NEXTVAL
		       ,#{memNo}
		       ,SYSDATE
		       ,#{originName}
		       ,#{changeName}
		       ,'Y'
		       )
	</insert>
	
	<!-- 배너 수정 -->
	<update id="updateBanner" parameterType="banner">
		UPDATE
		       BANNER
		   SET
		       STATUS = #{status}
		 WHERE
		       BANNER_NO = #{bannerNo}
	</update>
	
	
	
<!-- 
=============================== 
공지 관련 기능
===============================
-->	


	<!-- 공지사항 등록 -->
	<insert id="insertNotice" parameterType="notice">
		INSERT
		  INTO
		       NOTICE
		       (
		       NOTICE_NO
		       ,CATEGORY
		       ,TITLE
		       ,CONTENT
		       ,MEM_NO
		       ,CREATE_DATE
		       ,ORIGIN_NAME
		       ,CHANGE_NAME
		       )
		VALUES
		       (
		       SEQ_NNO.NEXTVAL
		       ,#{category}
		       ,#{title}
		       ,#{content}
		       ,#{memNo}
		       ,SYSDATE
		       ,#{originName}
		       ,#{changeName}
		       )
	</insert>
	
	<!-- 공지사항 수정 -->
	<update id="updateNotice" parameterType="notice">
		UPDATE
		       NOTICE
		   SET
			   CATEGORY = #{category}
			   ,TITLE = #{title}
			   ,CONTENT = #{content}
			   ,ORIGIN_NAME = #{originName}
			   ,CHANGE_NAME = #{changeName}
	     WHERE
	           NOTICE_NO = #{noticeNo}
	       AND
	           STATUS = 'Y'
	</update>
	
	<!-- 공지사항 삭제 -->
	<update id="deleteNotice" parameterType="_int">
		UPDATE
		       NOTICE
		   SET
		       STATUS = 'N'
		 WHERE
			   NOTICE_NO = #{nno}
	   	   AND
	   	       STATUS = 'Y'	
	</update>
	
	
	
	
</mapper>
